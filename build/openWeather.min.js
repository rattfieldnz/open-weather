/*!

 Name: Open Weather
 Dependencies: jQuery, OpenWeatherMap API
 Author: Michael Lynch
 Author URL: http://michaelynch.com
 Date Created: August 28, 2013
 Licensed under the MIT license

 */
!function(e){e.fn.openWeather=function(t){if(!this.length)return this;var n,r={descriptionTarget:null,maxTemperatureTarget:null,minTemperatureTarget:null,windSpeedTarget:null,windDirectionTarget:null,humidityTarget:null,sunriseTarget:null,sunsetTarget:null,placeTarget:null,iconTarget:null,customIcons:null,units:"c",city:null,lat:null,lng:null,key:null,lang:"en",success:function(){},error:function(e){}},a=this,i=e(this);a.settings={},a.settings=e.extend({},r,t);var l=a.settings;n="//api.openweathermap.org/data/2.5/weather?lang="+l.lang,null!=l.city?n+="&q="+l.city.replace(" ",""):null!=l.lat&&null!=l.lng&&(n+="&lat="+l.lat+"&lon="+l.lng),null!=l.key&&(n+="&appid="+l.key);var u=function(e){var t=1e3*e,n=new Date(t),r=n.getHours();r>12&&(hoursRemaining=24-r,r=12-hoursRemaining);var a=n.getMinutes();a=a.toString(),a.length<2&&(a=0+a);var i=r+":"+a;return i};e.ajax({type:"GET",url:n,dataType:"jsonp",success:function(t){if("f"==l.units)var n=Math.round(1.8*(t.main.temp-273.15)+32)+"°F",r=Math.round(1.8*(t.main.temp_min-273.15)+32)+"°F",a=Math.round(1.8*(t.main.temp_max-273.15)+32)+"°F";else var n=Math.round(t.main.temp-273.15)+"°C",r=Math.round(t.main.temp_min-273.15)+"°C",a=Math.round(t.main.temp_max-273.15)+"°C";if(i.html(n),null!=l.minTemperatureTarget&&e(l.minTemperatureTarget).text(r),null!=l.maxTemperatureTarget&&e(l.maxTemperatureTarget).text(a),e(l.descriptionTarget).text(t.weather[0].description),null!=l.iconTarget&&null!=t.weather[0].icon){if(null!=l.customIcons){var s,g,o=t.weather[0].icon;g=-1!=o.indexOf("d")?"day":"night",("01d"==o||"01n"==o)&&(s="clear"),("02d"==o||"02n"==o||"03d"==o||"03n"==o||"04d"==o||"04n"==o)&&(s="clouds"),("09d"==o||"09n"==o||"10d"==o||"10n"==o)&&(s="rain"),("11d"==o||"11n"==o)&&(s="storm"),("13d"==o||"13n"==o)&&(s="snow"),("50d"==o||"50n"==o)&&(s="mist");var c=l.customIcons+g+"/"+s+".png"}else var c="http://openweathermap.org/img/w/"+t.weather[0].icon+".png";e(l.iconTarget).attr("src",c)}if(null!=l.placeTarget&&e(l.placeTarget).text(t.name+", "+t.sys.country),null!=l.windSpeedTarget&&e(l.windSpeedTarget).text(Math.round(t.wind.speed)+" Mps"),null!=l.windDirectionTarget&&e(l.windDirectionTarget).text(t.wind.deg),null!=l.humidityTarget&&e(l.humidityTarget).text(t.main.humidity+"%"),null!=l.sunriseTarget){var m=u(t.sys.sunrise);e(l.sunriseTarget).text(m+" AM")}if(null!=l.sunsetTarget){var d=u(t.sys.sunset);e(l.sunsetTarget).text(d+" PM")}l.success.call(this)},error:function(e,t,n){l.error.call(this,t)}})}}(jQuery);
